Elvish File
  ElvishChunkImpl(CHUNK)
    ElvishForCommandImpl(FOR_COMMAND)
      PsiElement(ElvishTokenType.for)('for')
      PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
      ElvishVariableImpl(VARIABLE)
        ElvishVariableNameImpl(VARIABLE_NAME)
          PsiElement(ElvishTokenType.VARIABLE_CHAR)('seg')
      PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
      ElvishCollectionImpl(COLLECTION)
        ElvishVariableRefImpl(VARIABLE_REF)
          PsiElement(ElvishTokenType.$)('$')
          ElvishVariableNameImpl(VARIABLE_NAME)
            PsiElement(ElvishTokenType.VARIABLE_CHAR)('segments')
      PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
      PsiElement(ElvishTokenType.{)('{')
      ElvishChunkImpl(CHUNK)
        ElvishPipelineSepImpl(PIPELINE_SEP)
          PsiElement(ElvishTokenType.EOL)('\n')
        PsiElement(ElvishTokenType.INLINE_WHITESPACE)('  ')
        ElvishIfCommandImpl(IF_COMMAND)
          PsiElement(ElvishTokenType.if)('if')
          PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
          ElvishConditionImpl(CONDITION)
            ElvishVariableRefImpl(VARIABLE_REF)
              PsiElement(ElvishTokenType.$)('$')
              ElvishVariableNameImpl(VARIABLE_NAME)
                PsiElement(ElvishTokenType.VARIABLE_CHAR)('first')
          PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
          PsiElement(ElvishTokenType.{)('{')
          ElvishChunkImpl(CHUNK)
            ElvishPipelineSepImpl(PIPELINE_SEP)
              PsiElement(ElvishTokenType.EOL)('\n')
            PsiElement(ElvishTokenType.INLINE_WHITESPACE)('    ')
            ElvishHeadImpl(HEAD)
              ElvishCommandBarewordImpl(COMMAND_BAREWORD)
                PsiElement(ElvishTokenType.VARIABLE_CHAR)('put')
            PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
            ElvishArgumentImpl(ARGUMENT)
              ElvishCompoundImpl(COMPOUND)
                ElvishOutputCaptureImpl(OUTPUT_CAPTURE)
                  PsiElement(ElvishTokenType.()('(')
                  ElvishChunkImpl(CHUNK)
                    ElvishHeadImpl(HEAD)
                      ElvishNamespaceNameImpl(NAMESPACE_NAME)
                        PsiElement(ElvishTokenType.VARIABLE_CHAR)('edit')
                        PsiElement(ElvishTokenType.:)(':')
                      ElvishCommandBarewordImpl(COMMAND_BAREWORD)
                        PsiElement(ElvishTokenType.VARIABLE_CHAR)('styled')
                    PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
                    ElvishArgumentImpl(ARGUMENT)
                      ElvishCompoundImpl(COMPOUND)
                        ElvishVariableRefImpl(VARIABLE_REF)
                          PsiElement(ElvishTokenType.$)('$')
                          ElvishVariableNameImpl(VARIABLE_NAME)
                            PsiElement(ElvishTokenType.VARIABLE_CHAR)('cfg')
                          PsiElement(ElvishTokenType.[)('[')
                          ElvishBarewordImpl(BAREWORD)
                            PsiElement(ElvishTokenType.VARIABLE_CHAR)('prefix')
                          PsiElement(ElvishTokenType.])(']')
                    PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
                    ElvishArgumentImpl(ARGUMENT)
                      ElvishCompoundImpl(COMPOUND)
                        ElvishVariableRefImpl(VARIABLE_REF)
                          PsiElement(ElvishTokenType.$)('$')
                          ElvishVariableNameImpl(VARIABLE_NAME)
                            PsiElement(ElvishTokenType.VARIABLE_CHAR)('ps')
                  PsiElement(ElvishTokenType.))(')')
            ElvishPipelineSepImpl(PIPELINE_SEP)
              PsiElement(ElvishTokenType.EOL)('\n')
            PsiElement(ElvishTokenType.INLINE_WHITESPACE)('    ')
            ElvishAssignmentImpl(ASSIGNMENT)
              ElvishVariableImpl(VARIABLE)
                ElvishVariableNameImpl(VARIABLE_NAME)
                  PsiElement(ElvishTokenType.VARIABLE_CHAR)('first')
              PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
              PsiElement(ElvishTokenType.=)('=')
              PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
              ElvishCompoundImpl(COMPOUND)
                ElvishVariableRefImpl(VARIABLE_REF)
                  PsiElement(ElvishTokenType.$)('$')
                  ElvishVariableNameImpl(VARIABLE_NAME)
                    PsiElement(ElvishTokenType.VARIABLE_CHAR)('false')
            ElvishPipelineSepImpl(PIPELINE_SEP)
              PsiElement(ElvishTokenType.EOL)('\n')
            PsiElement(ElvishTokenType.INLINE_WHITESPACE)('  ')
          PsiElement(ElvishTokenType.})('}')
        ElvishPipelineSepImpl(PIPELINE_SEP)
          PsiElement(ElvishTokenType.EOL)('\n')
        PsiElement(ElvishTokenType.INLINE_WHITESPACE)('  ')
        ElvishHeadImpl(HEAD)
          ElvishCommandBarewordImpl(COMMAND_BAREWORD)
            PsiElement(ElvishTokenType.VARIABLE_CHAR)('put')
        PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
        ElvishArgumentImpl(ARGUMENT)
          ElvishCompoundImpl(COMPOUND)
            ElvishOutputCaptureImpl(OUTPUT_CAPTURE)
              PsiElement(ElvishTokenType.()('(')
              ElvishChunkImpl(CHUNK)
                ElvishHeadImpl(HEAD)
                  ElvishNamespaceNameImpl(NAMESPACE_NAME)
                    PsiElement(ElvishTokenType.VARIABLE_CHAR)('edit')
                    PsiElement(ElvishTokenType.:)(':')
                  ElvishCommandBarewordImpl(COMMAND_BAREWORD)
                    PsiElement(ElvishTokenType.VARIABLE_CHAR)('styled')
                PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
                ElvishArgumentImpl(ARGUMENT)
                  ElvishCompoundImpl(COMPOUND)
                    ElvishVariableRefImpl(VARIABLE_REF)
                      PsiElement(ElvishTokenType.$)('$')
                      ElvishVariableNameImpl(VARIABLE_NAME)
                        PsiElement(ElvishTokenType.VARIABLE_CHAR)('cfg')
                      PsiElement(ElvishTokenType.[)('[')
                      ElvishBarewordImpl(BAREWORD)
                        PsiElement(ElvishTokenType.VARIABLE_CHAR)('segment-suffix')
                      PsiElement(ElvishTokenType.])(']')
                PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
                ElvishArgumentImpl(ARGUMENT)
                  ElvishCompoundImpl(COMPOUND)
                    ElvishVariableRefImpl(VARIABLE_REF)
                      PsiElement(ElvishTokenType.$)('$')
                      ElvishVariableNameImpl(VARIABLE_NAME)
                        PsiElement(ElvishTokenType.VARIABLE_CHAR)('ending-style')
              PsiElement(ElvishTokenType.))(')')
        ElvishPipelineSepImpl(PIPELINE_SEP)
          PsiElement(ElvishTokenType.EOL)('\n')
        ElvishPipelineSepImpl(PIPELINE_SEP)
          PsiElement(ElvishTokenType.EOL)('\n')
        PsiElement(ElvishTokenType.INLINE_WHITESPACE)('  ')
        ElvishAssignmentImpl(ASSIGNMENT)
          ElvishVariableImpl(VARIABLE)
            ElvishVariableNameImpl(VARIABLE_NAME)
              PsiElement(ElvishTokenType.VARIABLE_CHAR)('last-style')
          PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
          PsiElement(ElvishTokenType.=)('=')
          PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
          ElvishCompoundImpl(COMPOUND)
            ElvishVariableRefImpl(VARIABLE_REF)
              PsiElement(ElvishTokenType.$)('$')
              ElvishVariableNameImpl(VARIABLE_NAME)
                PsiElement(ElvishTokenType.VARIABLE_CHAR)('ending-style')
        ElvishPipelineSepImpl(PIPELINE_SEP)
          PsiElement(ElvishTokenType.EOL)('\n')
      PsiElement(ElvishTokenType.})('}')