Elvish File
  ElvishChunkImpl(CHUNK)
    ElvishForCommandImpl(FOR_COMMAND)
      PsiElement(ElvishTokenType.for)('for')
      PsiWhiteSpace(' ')
      ElvishVariableImpl(VARIABLE)
        PsiElement(ElvishTokenType.VARIABLE_CHAR)('seg')
      PsiWhiteSpace(' ')
      ElvishCollectionImpl(COLLECTION)
        ElvishVariableRefImpl(VARIABLE_REF)
          PsiElement(ElvishTokenType.$)('$')
          PsiElement(ElvishTokenType.VARIABLE_CHAR)('segments')
      PsiWhiteSpace(' ')
      PsiElement(ElvishTokenType.{)('{')
      ElvishChunkImpl(CHUNK)
        ElvishPipelineSepImpl(PIPELINE_SEP)
          PsiElement(ElvishTokenType.EOL)('\n')
        PsiWhiteSpace('  ')
        ElvishIfCommandImpl(IF_COMMAND)
          PsiElement(ElvishTokenType.if)('if')
          PsiWhiteSpace(' ')
          ElvishConditionImpl(CONDITION)
            ElvishVariableRefImpl(VARIABLE_REF)
              PsiElement(ElvishTokenType.$)('$')
              PsiElement(ElvishTokenType.VARIABLE_CHAR)('first')
          PsiWhiteSpace(' ')
          PsiElement(ElvishTokenType.{)('{')
          ElvishChunkImpl(CHUNK)
            ElvishPipelineSepImpl(PIPELINE_SEP)
              PsiElement(ElvishTokenType.EOL)('\n')
            PsiWhiteSpace('    ')
            ElvishHeadImpl(HEAD)
              ElvishCommandBarewordImpl(COMMAND_BAREWORD)
                PsiElement(ElvishTokenType.VARIABLE_CHAR)('put')
            PsiWhiteSpace(' ')
            ElvishArgumentImpl(ARGUMENT)
              ElvishCompoundImpl(COMPOUND)
                ElvishOutputCaptureImpl(OUTPUT_CAPTURE)
                  PsiElement(ElvishTokenType.()('(')
                  ElvishChunkImpl(CHUNK)
                    ElvishHeadImpl(HEAD)
                      ElvishCommandBarewordImpl(COMMAND_BAREWORD)
                        PsiElement(ElvishTokenType.VARIABLE_CHAR)('edit:styled')
                    PsiWhiteSpace(' ')
                    ElvishArgumentImpl(ARGUMENT)
                      ElvishCompoundImpl(COMPOUND)
                        ElvishVariableRefImpl(VARIABLE_REF)
                          PsiElement(ElvishTokenType.$)('$')
                          PsiElement(ElvishTokenType.VARIABLE_CHAR)('cfg')
                          PsiElement(ElvishTokenType.[)('[')
                          ElvishBarewordImpl(BAREWORD)
                            PsiElement(ElvishTokenType.VARIABLE_CHAR)('prefix')
                          PsiElement(ElvishTokenType.])(']')
                    PsiWhiteSpace(' ')
                    ElvishArgumentImpl(ARGUMENT)
                      ElvishCompoundImpl(COMPOUND)
                        ElvishVariableRefImpl(VARIABLE_REF)
                          PsiElement(ElvishTokenType.$)('$')
                          PsiElement(ElvishTokenType.VARIABLE_CHAR)('ps')
                  PsiElement(ElvishTokenType.))(')')
            ElvishPipelineSepImpl(PIPELINE_SEP)
              PsiElement(ElvishTokenType.EOL)('\n')
            PsiWhiteSpace('    ')
            ElvishAssignmentImpl(ASSIGNMENT)
              ElvishVariableImpl(VARIABLE)
                PsiElement(ElvishTokenType.VARIABLE_CHAR)('first')
              PsiWhiteSpace(' ')
              PsiElement(ElvishTokenType.=)('=')
              PsiWhiteSpace(' ')
              ElvishCompoundImpl(COMPOUND)
                ElvishVariableRefImpl(VARIABLE_REF)
                  PsiElement(ElvishTokenType.$)('$')
                  PsiElement(ElvishTokenType.VARIABLE_CHAR)('false')
            ElvishPipelineSepImpl(PIPELINE_SEP)
              PsiElement(ElvishTokenType.EOL)('\n')
          PsiWhiteSpace('  ')
          PsiElement(ElvishTokenType.})('}')
        ElvishPipelineSepImpl(PIPELINE_SEP)
          PsiElement(ElvishTokenType.EOL)('\n')
        PsiWhiteSpace('  ')
        ElvishHeadImpl(HEAD)
          ElvishCommandBarewordImpl(COMMAND_BAREWORD)
            PsiElement(ElvishTokenType.VARIABLE_CHAR)('put')
        PsiWhiteSpace(' ')
        ElvishArgumentImpl(ARGUMENT)
          ElvishCompoundImpl(COMPOUND)
            ElvishOutputCaptureImpl(OUTPUT_CAPTURE)
              PsiElement(ElvishTokenType.()('(')
              ElvishChunkImpl(CHUNK)
                ElvishHeadImpl(HEAD)
                  ElvishCommandBarewordImpl(COMMAND_BAREWORD)
                    PsiElement(ElvishTokenType.VARIABLE_CHAR)('edit:styled')
                PsiWhiteSpace(' ')
                ElvishArgumentImpl(ARGUMENT)
                  ElvishCompoundImpl(COMPOUND)
                    ElvishVariableRefImpl(VARIABLE_REF)
                      PsiElement(ElvishTokenType.$)('$')
                      PsiElement(ElvishTokenType.VARIABLE_CHAR)('cfg')
                      PsiElement(ElvishTokenType.[)('[')
                      ElvishBarewordImpl(BAREWORD)
                        PsiElement(ElvishTokenType.VARIABLE_CHAR)('segment-suffix')
                      PsiElement(ElvishTokenType.])(']')
                PsiWhiteSpace(' ')
                ElvishArgumentImpl(ARGUMENT)
                  ElvishCompoundImpl(COMPOUND)
                    ElvishVariableRefImpl(VARIABLE_REF)
                      PsiElement(ElvishTokenType.$)('$')
                      PsiElement(ElvishTokenType.VARIABLE_CHAR)('ending-style')
              PsiElement(ElvishTokenType.))(')')
        ElvishPipelineSepImpl(PIPELINE_SEP)
          PsiElement(ElvishTokenType.EOL)('\n')
        ElvishPipelineSepImpl(PIPELINE_SEP)
          PsiElement(ElvishTokenType.EOL)('\n')
        PsiWhiteSpace('  ')
        ElvishAssignmentImpl(ASSIGNMENT)
          ElvishVariableImpl(VARIABLE)
            PsiElement(ElvishTokenType.VARIABLE_CHAR)('last-style')
          PsiWhiteSpace(' ')
          PsiElement(ElvishTokenType.=)('=')
          PsiWhiteSpace(' ')
          ElvishCompoundImpl(COMPOUND)
            ElvishVariableRefImpl(VARIABLE_REF)
              PsiElement(ElvishTokenType.$)('$')
              PsiElement(ElvishTokenType.VARIABLE_CHAR)('ending-style')
        ElvishPipelineSepImpl(PIPELINE_SEP)
          PsiElement(ElvishTokenType.EOL)('\n')
      PsiElement(ElvishTokenType.})('}')