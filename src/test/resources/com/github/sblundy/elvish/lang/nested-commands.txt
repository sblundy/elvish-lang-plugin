Elvish File
  ElvishForStatementImpl(FOR_STATEMENT)
    PsiElement(ElvishTokenType.for)('for')
    PsiWhiteSpace(' ')
    ElvishVariableDeclarationImpl(VARIABLE_DECLARATION)
      PsiElement(ElvishTokenType.VARIABLE)('seg')
    PsiWhiteSpace(' ')
    ElvishCollectionImpl(COLLECTION)
      ElvishVariableRefImpl(VARIABLE_REF)
        PsiElement(ElvishTokenType.VAR_REF)('$segments')
    PsiWhiteSpace(' ')
    ElvishBlockImpl(BLOCK)
      PsiElement(ElvishTokenType.open_brace)('{')
      PsiWhiteSpace('\n  ')
      ElvishIfStatementImpl(IF_STATEMENT)
        PsiElement(ElvishTokenType.if)('if')
        PsiWhiteSpace(' ')
        ElvishConditionImpl(CONDITION)
          ElvishVariableRefImpl(VARIABLE_REF)
            PsiElement(ElvishTokenType.VAR_REF)('$first')
        PsiWhiteSpace(' ')
        ElvishBlockImpl(BLOCK)
          PsiElement(ElvishTokenType.open_brace)('{')
          PsiWhiteSpace('\n    ')
          ElvishOrdinaryCommandImpl(ORDINARY_COMMAND)
            ElvishHeadImpl(HEAD)
              PsiElement(ElvishTokenType.VARIABLE)('put')
            PsiWhiteSpace(' ')
            ElvishArgumentImpl(ARGUMENT)
              ElvishOutputCaptureImpl(OUTPUT_CAPTURE)
                PsiElement(ElvishTokenType.open_paran)('(')
                ElvishOrdinaryCommandImpl(ORDINARY_COMMAND)
                  ElvishHeadImpl(HEAD)
                    PsiElement(ElvishTokenType.VARIABLE)('edit:styled')
                  PsiWhiteSpace(' ')
                  ElvishArgumentImpl(ARGUMENT)
                    ElvishVariableRefImpl(VARIABLE_REF)
                      PsiElement(ElvishTokenType.VAR_REF)('$cfg')
                      ElvishVariableIndexImpl(VARIABLE_INDEX)
                        PsiElement(ElvishTokenType.open_bracket)('[')
                        PsiElement(ElvishTokenType.VARIABLE)('prefix')
                        PsiElement(ElvishTokenType.close_bracket)(']')
                  PsiWhiteSpace(' ')
                  ElvishArgumentImpl(ARGUMENT)
                    ElvishVariableRefImpl(VARIABLE_REF)
                      PsiElement(ElvishTokenType.VAR_REF)('$ps')
                PsiElement(ElvishTokenType.close_paran)(')')
            PsiElement(ElvishTokenType.EOL)('\n    ')
          ElvishAssignmentImpl(ASSIGNMENT)
            PsiElement(ElvishTokenType.VARIABLE)('first')
            PsiWhiteSpace(' ')
            PsiElement(ElvishTokenType.=)('=')
            PsiWhiteSpace(' ')
            ElvishVariableRefImpl(VARIABLE_REF)
              PsiElement(ElvishTokenType.VAR_REF)('$false')
          PsiWhiteSpace('\n  ')
          PsiElement(ElvishTokenType.close_brace)('}')
      PsiWhiteSpace('\n  ')
      ElvishOrdinaryCommandImpl(ORDINARY_COMMAND)
        ElvishHeadImpl(HEAD)
          PsiElement(ElvishTokenType.VARIABLE)('put')
        PsiWhiteSpace(' ')
        ElvishArgumentImpl(ARGUMENT)
          ElvishOutputCaptureImpl(OUTPUT_CAPTURE)
            PsiElement(ElvishTokenType.open_paran)('(')
            ElvishOrdinaryCommandImpl(ORDINARY_COMMAND)
              ElvishHeadImpl(HEAD)
                PsiElement(ElvishTokenType.VARIABLE)('edit:styled')
              PsiWhiteSpace(' ')
              ElvishArgumentImpl(ARGUMENT)
                ElvishVariableRefImpl(VARIABLE_REF)
                  PsiElement(ElvishTokenType.VAR_REF)('$cfg')
                  ElvishVariableIndexImpl(VARIABLE_INDEX)
                    PsiElement(ElvishTokenType.open_bracket)('[')
                    PsiElement(ElvishTokenType.VARIABLE)('segment-suffix')
                    PsiElement(ElvishTokenType.close_bracket)(']')
              PsiWhiteSpace(' ')
              ElvishArgumentImpl(ARGUMENT)
                ElvishVariableRefImpl(VARIABLE_REF)
                  PsiElement(ElvishTokenType.VAR_REF)('$ending-style')
            PsiElement(ElvishTokenType.close_paran)(')')
        PsiElement(ElvishTokenType.EOL)('\n\n  ')
      ElvishAssignmentImpl(ASSIGNMENT)
        PsiElement(ElvishTokenType.VARIABLE)('last-style')
        PsiWhiteSpace(' ')
        PsiElement(ElvishTokenType.=)('=')
        PsiWhiteSpace(' ')
        ElvishVariableRefImpl(VARIABLE_REF)
          PsiElement(ElvishTokenType.VAR_REF)('$ending-style')
      PsiWhiteSpace('\n')
      PsiElement(ElvishTokenType.close_brace)('}')