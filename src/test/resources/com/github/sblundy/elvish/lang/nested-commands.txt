Elvish File
  ElvishChunkImpl(CHUNK)
    ElvishForCommandImpl(FOR_COMMAND)
      PsiElement(ElvishTokenType.for)('for')
      PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
      ElvishUnquotedVariableNameImpl(UNQUOTED_VARIABLE_NAME)
        PsiElement(ElvishTokenType.VARIABLE_CHAR)('seg')
      PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
      ElvishCollectionImpl(COLLECTION)
        ElvishVariableRefImpl(VARIABLE_REF)
          PsiElement(ElvishTokenType.$)('$')
          ElvishUnquotedVariableNameImpl(UNQUOTED_VARIABLE_NAME)
            PsiElement(ElvishTokenType.VARIABLE_CHAR)('segments')
      PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
      PsiElement(ElvishTokenType.{)('{')
      ElvishChunkImpl(CHUNK)
        ElvishPipelineSepImpl(PIPELINE_SEP)
          PsiElement(ElvishTokenType.EOL)('\n')
        PsiElement(ElvishTokenType.INLINE_WHITESPACE)('  ')
        ElvishIfCommandImpl(IF_COMMAND)
          PsiElement(ElvishTokenType.if)('if')
          PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
          ElvishConditionImpl(CONDITION)
            ElvishVariableRefImpl(VARIABLE_REF)
              PsiElement(ElvishTokenType.$)('$')
              ElvishUnquotedVariableNameImpl(UNQUOTED_VARIABLE_NAME)
                PsiElement(ElvishTokenType.VARIABLE_CHAR)('first')
          PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
          PsiElement(ElvishTokenType.{)('{')
          ElvishChunkImpl(CHUNK)
            ElvishPipelineSepImpl(PIPELINE_SEP)
              PsiElement(ElvishTokenType.EOL)('\n')
            PsiElement(ElvishTokenType.INLINE_WHITESPACE)('    ')
            ElvishHeadImpl(HEAD)
              ElvishCommandExpressionImpl(COMMAND_EXPRESSION)
                ElvishCommandBarewordImpl(COMMAND_BAREWORD)
                  PsiElement(ElvishTokenType.VARIABLE_CHAR)('put')
            PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
            ElvishArgumentImpl(ARGUMENT)
              ElvishCompoundImpl(COMPOUND)
                ElvishOutputCaptureImpl(OUTPUT_CAPTURE)
                  PsiElement(ElvishTokenType.()('(')
                  ElvishChunkImpl(CHUNK)
                    ElvishHeadImpl(HEAD)
                      ElvishNamespaceCommandExpressionImpl(NAMESPACE_COMMAND_EXPRESSION)
                        ElvishNamespaceNameImpl(NAMESPACE_NAME)
                          ElvishUnquotedVariableNameImpl(UNQUOTED_VARIABLE_NAME)
                            PsiElement(ElvishTokenType.VARIABLE_CHAR)('edit')
                          PsiElement(ElvishTokenType.:)(':')
                        ElvishCommandBarewordImpl(COMMAND_BAREWORD)
                          PsiElement(ElvishTokenType.VARIABLE_CHAR)('styled')
                    PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
                    ElvishArgumentImpl(ARGUMENT)
                      ElvishCompoundImpl(COMPOUND)
                        ElvishVariableRefImpl(VARIABLE_REF)
                          PsiElement(ElvishTokenType.$)('$')
                          ElvishUnquotedVariableNameImpl(UNQUOTED_VARIABLE_NAME)
                            PsiElement(ElvishTokenType.VARIABLE_CHAR)('cfg')
                          ElvishVarIndexImpl(VAR_INDEX)
                            PsiElement(ElvishTokenType.[)('[')
                            ElvishIndexSingleImpl(INDEX_SINGLE)
                              PsiElement(ElvishTokenType.VARIABLE_CHAR)('prefix')
                            PsiElement(ElvishTokenType.])(']')
                    PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
                    ElvishArgumentImpl(ARGUMENT)
                      ElvishCompoundImpl(COMPOUND)
                        ElvishVariableRefImpl(VARIABLE_REF)
                          PsiElement(ElvishTokenType.$)('$')
                          ElvishUnquotedVariableNameImpl(UNQUOTED_VARIABLE_NAME)
                            PsiElement(ElvishTokenType.VARIABLE_CHAR)('ps')
                  PsiElement(ElvishTokenType.))(')')
            ElvishPipelineSepImpl(PIPELINE_SEP)
              PsiElement(ElvishTokenType.EOL)('\n')
            PsiElement(ElvishTokenType.INLINE_WHITESPACE)('    ')
            ElvishAssignmentImpl(ASSIGNMENT)
              ElvishLegacyVariableAssignmentImpl(LEGACY_VARIABLE_ASSIGNMENT)
                ElvishUnquotedVariableNameImpl(UNQUOTED_VARIABLE_NAME)
                  PsiElement(ElvishTokenType.VARIABLE_CHAR)('first')
              PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
              PsiElement(ElvishTokenType.=)('=')
              PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
              ElvishCompoundImpl(COMPOUND)
                ElvishVariableRefImpl(VARIABLE_REF)
                  PsiElement(ElvishTokenType.$)('$')
                  ElvishUnquotedVariableNameImpl(UNQUOTED_VARIABLE_NAME)
                    PsiElement(ElvishTokenType.VARIABLE_CHAR)('false')
            ElvishPipelineSepImpl(PIPELINE_SEP)
              PsiElement(ElvishTokenType.EOL)('\n')
            PsiElement(ElvishTokenType.INLINE_WHITESPACE)('  ')
          PsiElement(ElvishTokenType.})('}')
        ElvishPipelineSepImpl(PIPELINE_SEP)
          PsiElement(ElvishTokenType.EOL)('\n')
        PsiElement(ElvishTokenType.INLINE_WHITESPACE)('  ')
        ElvishHeadImpl(HEAD)
          ElvishCommandExpressionImpl(COMMAND_EXPRESSION)
            ElvishCommandBarewordImpl(COMMAND_BAREWORD)
              PsiElement(ElvishTokenType.VARIABLE_CHAR)('put')
        PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
        ElvishArgumentImpl(ARGUMENT)
          ElvishCompoundImpl(COMPOUND)
            ElvishOutputCaptureImpl(OUTPUT_CAPTURE)
              PsiElement(ElvishTokenType.()('(')
              ElvishChunkImpl(CHUNK)
                ElvishHeadImpl(HEAD)
                  ElvishNamespaceCommandExpressionImpl(NAMESPACE_COMMAND_EXPRESSION)
                    ElvishNamespaceNameImpl(NAMESPACE_NAME)
                      ElvishUnquotedVariableNameImpl(UNQUOTED_VARIABLE_NAME)
                        PsiElement(ElvishTokenType.VARIABLE_CHAR)('edit')
                      PsiElement(ElvishTokenType.:)(':')
                    ElvishCommandBarewordImpl(COMMAND_BAREWORD)
                      PsiElement(ElvishTokenType.VARIABLE_CHAR)('styled')
                PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
                ElvishArgumentImpl(ARGUMENT)
                  ElvishCompoundImpl(COMPOUND)
                    ElvishVariableRefImpl(VARIABLE_REF)
                      PsiElement(ElvishTokenType.$)('$')
                      ElvishUnquotedVariableNameImpl(UNQUOTED_VARIABLE_NAME)
                        PsiElement(ElvishTokenType.VARIABLE_CHAR)('cfg')
                      ElvishVarIndexImpl(VAR_INDEX)
                        PsiElement(ElvishTokenType.[)('[')
                        ElvishIndexSingleImpl(INDEX_SINGLE)
                          PsiElement(ElvishTokenType.VARIABLE_CHAR)('segment-suffix')
                        PsiElement(ElvishTokenType.])(']')
                PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
                ElvishArgumentImpl(ARGUMENT)
                  ElvishCompoundImpl(COMPOUND)
                    ElvishVariableRefImpl(VARIABLE_REF)
                      PsiElement(ElvishTokenType.$)('$')
                      ElvishUnquotedVariableNameImpl(UNQUOTED_VARIABLE_NAME)
                        PsiElement(ElvishTokenType.VARIABLE_CHAR)('ending-style')
              PsiElement(ElvishTokenType.))(')')
        ElvishPipelineSepImpl(PIPELINE_SEP)
          PsiElement(ElvishTokenType.EOL)('\n')
        ElvishPipelineSepImpl(PIPELINE_SEP)
          PsiElement(ElvishTokenType.EOL)('\n')
        PsiElement(ElvishTokenType.INLINE_WHITESPACE)('  ')
        ElvishAssignmentImpl(ASSIGNMENT)
          ElvishLegacyVariableAssignmentImpl(LEGACY_VARIABLE_ASSIGNMENT)
            ElvishUnquotedVariableNameImpl(UNQUOTED_VARIABLE_NAME)
              PsiElement(ElvishTokenType.VARIABLE_CHAR)('last-style')
          PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
          PsiElement(ElvishTokenType.=)('=')
          PsiElement(ElvishTokenType.INLINE_WHITESPACE)(' ')
          ElvishCompoundImpl(COMPOUND)
            ElvishVariableRefImpl(VARIABLE_REF)
              PsiElement(ElvishTokenType.$)('$')
              ElvishUnquotedVariableNameImpl(UNQUOTED_VARIABLE_NAME)
                PsiElement(ElvishTokenType.VARIABLE_CHAR)('ending-style')
        ElvishPipelineSepImpl(PIPELINE_SEP)
          PsiElement(ElvishTokenType.EOL)('\n')
      PsiElement(ElvishTokenType.})('}')